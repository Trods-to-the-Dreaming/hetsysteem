{{#block "title"}}Begin beurt{{/block}}

<!------------------------------------------------------------------------------------------------>

<script>	
	const products = {{{json products}}};
	const buildings = {{{json buildings}}};
	const sizes = {{{json sizes}}};
	const characterState = {{{json characterState}}};
	const characterPhases = {{{json characterPhases}}};
	const phasePages = {{{json phasePages}}};
	const hasFinishedTurn = {{{json hasFinishedTurn}}};
	const currentPageIndex = hasFinishedTurn ? 0 : phasePages.length;
	
	localStorage.setItem('turn.products', JSON.stringify(products));
	localStorage.setItem('turn.buildings', JSON.stringify(buildings));
	localStorage.setItem('turn.sizes', JSON.stringify(sizes));
	localStorage.setItem('turn.characterState', JSON.stringify(characterState));
	Object.values(characterPhases).forEach((phase, index) => {
		localStorage.setItem(`turn.page${index}.actions`, JSON.stringify(phase));
	});
	localStorage.setItem('turn.phasePages', JSON.stringify(phasePages));
	localStorage.setItem('turn.currentPageIndex', JSON.stringify(currentPageIndex));
	localStorage.setItem('turn.started', JSON.stringify(true));
	
	location.replace(phasePages[0].url);
	
	
	
	// de fasen apart 
	// turn.manageBuildings
	// turn.manageEmploymentContracts
	// ...
	
</script>
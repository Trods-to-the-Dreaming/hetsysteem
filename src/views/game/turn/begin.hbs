{{#block "title"}}Begin beurt{{/block}}

<script>	
	const allProducts = {{{json allProducts}}};
	const allRecreations = {{{json allRecreations}}};
	const allBuildings = {{{json allBuildings}}};
	const allJobs = {{{json allJobs}}};
	
	localStorage.setItem('turn.allProducts', JSON.stringify(allProducts));
	localStorage.setItem('turn.allRecreations', JSON.stringify(allRecreations));
	localStorage.setItem('turn.allBuildings', JSON.stringify(allBuildings));
	localStorage.setItem('turn.allJobs', JSON.stringify(allJobs));
	
	const characterData = {{{json characterData}}};
	
	localStorage.setItem('turn.characterData', JSON.stringify(characterData));
	
	const characterActions = {{{json characterActions}}};
	
	characterActions.forEach((action, index) => {
		localStorage.setItem(`turn.page${index}.data`, JSON.stringify(action));
	});
	
	const actionPages = {{{json actionPages}}};
	const firstRelevantPageIndex = {{firstRelevantPageIndex}};
	const lastRelevantPageIndex = {{lastRelevantPageIndex}};
	const currentPageIndex = {{currentPageIndex}};

	localStorage.setItem('turn.actionPages', JSON.stringify(actionPages));
	localStorage.setItem('turn.firstRelevantPageIndex', firstRelevantPageIndex);
	localStorage.setItem('turn.lastRelevantPageIndex', lastRelevantPageIndex);
	localStorage.setItem('turn.currentPageIndex', currentPageIndex);
	
	localStorage.setItem('turn.begin', true);
	
	location.replace(actionPages[currentPageIndex].url);
</script>
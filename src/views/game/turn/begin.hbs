{{#block "title"}}Begin beurt{{/block}}

<script>	
	const productOptions = {{{json productOptions}}};
	const recreationOptions = {{{json recreationOptions}}};
	const buildingOptions = {{{json buildingOptions}}};
	const jobOptions = {{{json jobOptions}}};
	
	localStorage.setItem('turn.productOptions', JSON.stringify(productOptions));
	localStorage.setItem('turn.recreationOptions', JSON.stringify(recreationOptions));
	localStorage.setItem('turn.buildingOptions', JSON.stringify(buildingOptions));
	localStorage.setItem('turn.jobOptions', JSON.stringify(jobOptions));
	
	const productData = {{{json productData}}};
	const buildingData = {{{json buildingData}}};
	const characterData = {{{json characterData}}};
	
	localStorage.setItem('turn.productData', JSON.stringify(productData));
	localStorage.setItem('turn.buildingData', JSON.stringify(buildingData));
	localStorage.setItem('turn.characterData', JSON.stringify(characterData));
	
	const characterActions = {{{json characterActions}}};
	
	characterActions.forEach((action, index) => {
		localStorage.setItem(`turn.page${index}.data`, JSON.stringify(action));
	});
	
	const actionPages = {{{json actionPages}}};
	const firstRelevantPageIndex = {{firstRelevantPageIndex}};
	const lastRelevantPageIndex = {{lastRelevantPageIndex}};
	const currentPageIndex = {{currentPageIndex}};

	localStorage.setItem('turn.actionPages', JSON.stringify(actionPages));
	localStorage.setItem('turn.firstRelevantPageIndex', firstRelevantPageIndex);
	localStorage.setItem('turn.lastRelevantPageIndex', lastRelevantPageIndex);
	localStorage.setItem('turn.currentPageIndex', currentPageIndex);
	
	localStorage.setItem('turn.begin', true);
	
	location.replace(actionPages[currentPageIndex].url);
</script>